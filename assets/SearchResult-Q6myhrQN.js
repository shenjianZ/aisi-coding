import{u as _,f as te,g as ae,h as J,i as re,P as le,t as se,j as ie,k as Q,l as x,m as oe,n as U,p as a,q as ue,R as O,s as ne,v as ce,x as de,C as ve,y as ge,z as he,A as pe,B as ye,D as me,E as fe,F as be,G as T,H as $,I as je,J as E,K as we}from"./app-DYVwoHf9.js";const ke=["/","/intro.html","/Middleware/","/bigdata/","/java/","/other/","/project/","/Middleware/docker/","/Middleware/docker/docker.html","/Middleware/git/","/Middleware/git/git-advanced-usage.html","/Middleware/git/git-guide.html","/Middleware/linux/","/Middleware/linux/shell.html","/Middleware/mysql/","/Middleware/mysql/mysql.html","/Middleware/nginx/","/Middleware/nginx/nginx.html","/Middleware/redis/","/Middleware/redis/redis.html","/bigdata/flume/","/bigdata/flume/flume-channel.html","/bigdata/flume/flume-guide.html","/bigdata/flume/flume-sink.html","/bigdata/flume/flume-source.html","/bigdata/hadoop/","/bigdata/hive/","/bigdata/zookeeper/","/frontend/htmlCss/","/frontend/javascript/","/frontend/nodejs/","/frontend/react/","/frontend/typescript/","/frontend/vue/","/frontend/vue/vue-core.html","/frontend/vue/vue-guide.html","/frontend/vue/vue-pinia.html","/frontend/vue/vue-route.html","/java/JavaWeb/","/java/JavaWeb/basics.html","/java/JavaWeb/exam.html","/java/SpringBoot/","/java/SpringCloud/","/java/SpringMVC/","/java/SpringSecurity/","/java/basic/","/java/juc/","/java/jvm/","/java/newFeatures/","/java/nio/","/other/book/","/other/go/","/other/interview/","/project/project-template/","/project/project-template/backend.html","/project/project-template/frontend.html","/project/retailstore/DB.html","/project/retailstore/","/project/retailstore/RetailStore.html","/other/book/dbs/","/other/book/dv/","/other/book/it/","/other/book/os/","/other/book/os/os-guide.html","/404.html","/frontend/","/category/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/web/","/category/html/","/category/docker/","/category/git%E5%AD%A6%E4%B9%A0/","/category/git/","/category/linux/","/category/mysql/","/category/webserver/","/category/cachedatabase/","/category/flume%E5%AD%A6%E4%B9%A0/","/category/flume/","/category/sink/","/category/vue/","/category/web%E5%AD%A6%E4%B9%A0/","/category/javaweb/","/category/project/","/category/os/","/tag/","/tag/project.ts/","/tag/docker/","/tag/git/","/tag/advanced/","/tag/linux/","/tag/shell/","/tag/mysql/","/tag/nginx/","/tag/redis/","/tag/flume/","/tag/channel/","/tag/guide/","/tag/sink/","/tag/source/","/tag/vue/","/tag/core/","/tag/pinia/","/tag/router/","/tag/javaweb%E6%95%99%E7%A8%8B/","/tag/javaweb/","/tag/%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","/tag/go/","/tag/java/","/tag/springboot/","/tag/backend/","/tag/frontend/","/tag/qt/","/tag/cpp/","/tag/cmake/","/tag/dbs/","/tag/dv/","/tag/os/","/article/","/star/","/timeline/"],He="SEARCH_PRO_QUERY_HISTORY",m=_(He,[]),xe=()=>{const{queryHistoryCount:r}=E,l=r>0;return{enabled:l,queryHistory:m,addQueryHistory:s=>{l&&(m.value=Array.from(new Set([s,...m.value.slice(0,r-1)])))},removeQueryHistory:s=>{m.value=[...m.value.slice(0,s),...m.value.slice(s+1)]}}},B=r=>ke[r.id]+("anchor"in r?`#${r.anchor}`:""),Ee="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=E,f=_(Ee,[]),Re=()=>{const r=I>0;return{enabled:r,resultHistory:f,addResultHistory:l=>{if(r){const s={link:B(l),display:l.display};"header"in l&&(s.header=l.header),f.value=[s,...f.value.slice(0,I-1)]}},removeResultHistory:l=>{f.value=[...f.value.slice(0,l),...f.value.slice(l+1)]}}},Ae=r=>{const l=ve(),s=J(),R=ge(),o=Q(0),w=x(()=>o.value>0),h=he([]);return pe(()=>{const{search:p,terminate:A}=ye(),b=je(c=>{const j=c.join(" "),{searchFilter:q=g=>g,splitWord:S,suggestionsFilter:F,...y}=l.value;j?(o.value+=1,p(c.join(" "),s.value,y).then(g=>q(g,j,s.value,R.value)).then(g=>{o.value-=1,h.value=g}).catch(g=>{console.warn(g),o.value-=1,o.value||(h.value=[])})):h.value=[]},E.searchDelay-E.suggestDelay);U([r,s],([c])=>b(c),{immediate:!0}),me(()=>{A()})}),{isSearching:w,results:h}};var Se=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:l}){const s=ae(),R=J(),o=re(le),{enabled:w,addQueryHistory:h,queryHistory:p,removeQueryHistory:A}=xe(),{enabled:b,resultHistory:c,addResultHistory:j,removeResultHistory:q}=Re(),S=w||b,F=se(r,"queries"),{results:y,isSearching:g}=Ae(F),i=ie({isQuery:!0,index:0}),d=Q(0),v=Q(0),L=x(()=>S&&(p.value.length>0||c.value.length>0)),C=x(()=>y.value.length>0),D=x(()=>y.value[d.value]||null),W=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?c.value.length-1:p.value.length-1):i.index=t-1},Y=()=>{const{isQuery:e,index:t}=i;t===(e?p.value.length-1:c.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},z=()=>{d.value=d.value>0?d.value-1:y.value.length-1,v.value=D.value.contents.length-1},V=()=>{d.value=d.value<y.value.length-1?d.value+1:0,v.value=0},G=()=>{v.value<D.value.contents.length-1?v.value+=1:V()},K=()=>{v.value>0?v.value-=1:z()},M=e=>e.map(t=>we(t)?t:a(t[0],t[1])),N=e=>{if(e.type==="customField"){const t=fe[e.index]||"$content",[u,H=""]=be(t)?t[R.value].split("$content"):t.split("$content");return e.display.map(n=>a("div",M([u,...n,H])))}return e.display.map(t=>a("div",M(t)))},k=()=>{d.value=0,v.value=0,l("updateQuery",""),l("close")},X=()=>w?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.queryHistory),p.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{l("updateQuery",e)}},[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:u=>{u.preventDefault(),u.stopPropagation(),A(t)}})]))])):null,Z=()=>b?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.resultHistory),c.value.map((e,t)=>a(O,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{k()}},()=>[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(u=>M(u)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:u=>{u.preventDefault(),u.stopPropagation(),q(t)}})]))])):null;return oe("keydown",e=>{if(r.isFocusing){if(C.value){if(e.key==="ArrowUp")K();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const t=D.value.contents[v.value];h(r.queries.join(" ")),j(t),s.push(B(t)),k()}}else if(b){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(l("updateQuery",p.value[t]),e.preventDefault()):(s.push(c.value[t].link),k())}}}}),U([d,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:r.queries.length?!C.value:!L.value}],id:"search-pro-results"},r.queries.length?g.value?a(ue,{hint:o.value.searching}):C.value?a("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:t},u)=>{const H=d.value===u;return a("li",{class:["search-pro-result-list-item",{active:H}]},[a("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((n,ee)=>{const P=H&&v.value===ee;return a(O,{to:B(n),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{h(r.queries.join(" ")),j(n),k()}},()=>[n.type==="text"?null:a(n.type==="title"?ne:n.type==="heading"?ce:de,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?a("div",{class:"content-header"},n.header):null,a("div",N(n))])])})])})):o.value.emptyResult:S?L.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{Se as default};
